{% load static %}
<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Atrakcje</title>

    <!--basic css template-->
    <link rel="stylesheet" href="{% static 'css/main.css' %}">

    <link rel="stylesheet" href="{% static 'css/atrakcje.css' %}">
</head>
<body>
    <div class="navbar">
        <a href="{% url 'strona_glowna' %}">
            <div><strong>FavPlaces</strong></div>
        </a>

        <div style="display: flex; align-items: center;">
            {% if uzytkownik %}
                <div class="user-info">{{ uzytkownik.Imie }} {{ uzytkownik.Nazwisko }}</div>
                <form method="post" action="{% url 'wyloguj' %}">{% csrf_token %}
                    <button type="submit">Wyloguj</button>
                </form>
            {% else %}
                <a href="{% url 'logowanie' %}"><button>Zaloguj się</button></a>
                <a href="{% url 'rejestracja' %}"><button>Zarejestruj się</button></a>
            {% endif %}
        </div>
    </div>

    <div class="sub-navbar">
        <a href="{% url 'atrakcje' %}">Atrakcje </a>
        <a href="{% url 'historia' %}">Historia </a>
        <a href="{% url 'kontakt' %}">Kontakt </a>
    </div>

    <div class="content">
        <div class="atrakcje-search-bar">
            <form method="get" action="{% url 'atrakcje' %}" class="atrakcje-search-form">
                <input type="text" name="q" placeholder="Szukaj miejsc..." value="{{ query }}">
                <button type="submit">Szukaj</button>
                <select name="sort" class="sort-dropdown" onchange="this.form.submit()">
                    <option value="" {% if not request.GET.sort %}selected{% endif %}>Sortowanie</option>
                    <option value="asc" {% if request.GET.sort == "asc" %}selected{% endif %}>Alfabetycznie ↑</option>
                    <option value="desc" {% if request.GET.sort == "desc" %}selected{% endif %}>Alfabetycznie ↓</option>
                </select>
            </form>
                {% if uzytkownik %}
                    <a href="{% url 'dodaj_miejsce' %}">
                        <button class="add-place-button">Dodaj miejsce</button>
                    </a>
                {% endif %}
            
        </div>

    
        {% for miejsce in miejsca %}
        <div class="miejsce-box">
            {% if miejsce.zdjecie %}
        <img src="{{ miejsce.zdjecie.URL }}" alt="Zdjęcie miejsca">
        {% else %}
        <p>Brak zdjęcia</p>
        {% endif %}

            <div class="miejsce-info">
                <p><strong>Nazwa:</strong> {{ miejsce.Nazwa }}</p>
                <p><strong>Adres:</strong> {{ miejsce.Adres }} </p>
                <p><strong>Ocena:</strong> {{ miejsce.ocena }}/5
                    {% for i in "12345"|slice:":5" %}
                        {% if forloop.counter <= miejsce.ocena %}
                            ⭐
                        {% else %}
                            ☆
                        {% endif %}
                    {% endfor %}
                </p>
                <a href="{% url 'miejsce_szczegoly' miejsce.ID_Miejsce %}" class="wiecej-button">Więcej</a>
            </div>
        </div>
        {% endfor %}
    </div>
</body>
</html>
